<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SCFHS Prometric – Level 4 Hard Engine (Demo)</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #eef1f4;
  margin: 0;
  padding: 20px;
}
.container {
  max-width: 980px;
  margin: auto;
  background: #fff;
  padding: 25px;
  border-radius: 8px;
}
.option {
  border: 1px solid #bbb;
  padding: 12px;
  margin-bottom: 10px;
  border-radius: 5px;
  cursor: pointer;
}
.option input { margin-right: 10px; }
.option.correct { background: #e8f8f0; border-color: #2ecc71; }
.option.wrong { background: #fdecea; border-color: #e74c3c; }
.option.locked { pointer-events: none; opacity: 0.9; }

.tag {
  font-size: 12px;
  font-weight: bold;
  margin-top: 6px;
}
.scfhs { color: #1e8449; }
.nclex { color: #d68910; }
.str { color: #ca6f1e; }
.trap { color: #922b21; }

button {
  padding: 10px 22px;
  border-radius: 5px;
  border: none;
  font-size: 16px;
  cursor: pointer;
}
#submitBtn { background: #2874a6; color: #fff; }
#nextBtn { background: #239b56; color: #fff; display: none; }

#rationale {
  display: none;
  margin-top: 25px;
  border-top: 2px solid #ccc;
  padding-top: 20px;
}
.patho {
  background: #f9f9f9;
  padding: 15px;
  font-family: monospace;
  border-left: 5px solid #555;
}
</style>
</head>

<body>

<div class="container">

<h2 id="title"></h2>
<p id="question"></p>

<div id="options"></div>

<br>
<button id="submitBtn">Submit Answer</button>
<button id="nextBtn">Next Question</button>

<div id="rationale"></div>

</div>

<script>
const questions = [
/* ===================== Q1 – HYPOVOLEMIC SHOCK ===================== */
{
  title: "SCFHS Prometric – Level 4 (Hard)",
  stem: "A 72-year-old post-op patient becomes confused. BP 82/46, HR 134, RR 32, SpO₂ 91% on O₂, urine output 10 mL/hr. What is the IMMEDIATE priority?",
  correct: 0,
  options: [
    { text: "Initiate rapid IV crystalloid bolus", tag: "SCFHS_CORRECT",
      rationale: "Findings indicate shock with organ hypoperfusion. Volume resuscitation restores preload, cardiac output, and MAP immediately." },
    { text: "Apply high-flow oxygen", tag: "NCLEX_LEADING",
      rationale: "Oxygen supports saturation, but perfusion—not oxygenation—is the primary failure in SCFHS prioritization." },
    { text: "Notify the physician", tag: "STR_DELAY",
      rationale: "Escalation is appropriate but delayed. SCFHS expects nurse-initiated life-saving action first." },
    { text: "Insert urinary catheter", tag: "DISTRACTOR",
      rationale: "Oliguria is already evident. Measurement does not reverse shock." }
  ],
  patho: `
[ Hypovolemia ]
      ↓
[ ↓ Preload ]
      ↓
[ ↓ Cardiac Output ]
      ↓
[ ↓ MAP ]
      ↓
[ Cerebral + Renal Hypoperfusion ]
`
},

/* ===================== Q2 – SEPTIC SHOCK ===================== */
{
  title: "SCFHS Prometric – Level 4 (Hard)",
  stem: "A patient with pneumonia develops BP 84/48, HR 128, Temp 39.2°C, RR 34, lactate 5.1 mmol/L. Skin is warm and flushed. Priority action?",
  correct: 1,
  options: [
    { text: "Administer antipyretics", tag: "DISTRACTOR",
      rationale: "Fever control does not reverse distributive shock or restore perfusion." },
    { text: "Initiate aggressive IV fluid resuscitation", tag: "SCFHS_CORRECT",
      rationale: "Septic shock causes vasodilation and relative hypovolemia. Fluids restore intravascular volume and perfusion." },
    { text: "Administer vasopressors immediately", tag: "NCLEX_TRAP",
      rationale: "Vasopressors are indicated after adequate fluid resuscitation, not before." },
    { text: "Obtain blood cultures", tag: "STR_DELAY",
      rationale: "Cultures are essential but must not delay hemodynamic stabilization." }
  ],
  patho: `
[ Infection ]
      ↓
[ Systemic Vasodilation ]
      ↓
[ Relative Hypovolemia ]
      ↓
[ ↓ Tissue Perfusion ]
      ↓
[ ↑ Lactate + Shock ]
`
},

/* ===================== Q3 – CARDIOGENIC SHOCK ===================== */
{
  title: "SCFHS Prometric – Level 4 (Hard)",
  stem: "A patient with acute MI develops BP 78/44, HR 118, crackles bilaterally, cool clammy skin. What is the priority nursing action?",
  correct: 2,
  options: [
    { text: "Administer large IV fluid bolus", tag: "NCLEX_TRAP",
      rationale: "In cardiogenic shock, excess fluids worsen pulmonary edema and oxygenation." },
    { text: "Place patient supine with legs elevated", tag: "DISTRACTOR",
      rationale: "Positioning does not correct pump failure." },
    { text: "Prepare for inotropic support", tag: "SCFHS_CORRECT",
      rationale: "Cardiac pump failure requires inotropes to improve contractility and cardiac output." },
    { text: "Delay intervention until cardiology review", tag: "STR_DELAY",
      rationale: "Waiting worsens myocardial and systemic hypoperfusion." }
  ],
  patho: `
[ MI ]
   ↓
[ ↓ Contractility ]
   ↓
[ ↓ Cardiac Output ]
   ↓
[ Pulmonary Congestion + Hypotension ]
`
}
];

let current = 0;

function loadQuestion() {
  const q = questions[current];
  document.getElementById("title").innerText = q.title;
  document.getElementById("question").innerHTML = "<b>Q" + (current+1) + ".</b> " + q.stem;

  const optDiv = document.getElementById("options");
  optDiv.innerHTML = "";

  q.options.forEach((o, i) => {
    optDiv.innerHTML += `
      <label class="option">
        <input type="radio" name="ans" value="${i}">
        ${o.text}
      </label>`;
  });

  document.getElementById("rationale").style.display = "none";
  document.getElementById("submitBtn").style.display = "inline-block";
  document.getElementById("nextBtn").style.display = "none";
}

document.getElementById("submitBtn").onclick = () => {
  const sel = document.querySelector("input[name='ans']:checked");
  if (!sel) { alert("Select an answer."); return; }

  const q = questions[current];
  const idx = parseInt(sel.value);
  const ops = document.querySelectorAll(".option");

  ops.forEach((op, i) => {
    op.classList.add("locked");
    if (i === q.correct) op.classList.add("correct");
    else if (i === idx) op.classList.add("wrong");

    const t = document.createElement("div");
    t.className = "tag " + tagClass(q.options[i].tag);
    t.innerText = q.options[i].tag.replace("_"," ");
    op.appendChild(t);
  });

  showRationale(q);
  document.getElementById("submitBtn").style.display = "none";
  document.getElementById("nextBtn").style.display = "inline-block";
};

document.getElementById("nextBtn").onclick = () => {
  current++;
  if (current < questions.length) loadQuestion();
  else alert("Demo complete – Level 4 finished.");
};

function tagClass(tag) {
  if (tag.includes("SCFHS")) return "scfhs";
  if (tag.includes("NCLEX")) return "nclex";
  if (tag.includes("STR")) return "str";
  return "trap";
}

function showRationale(q) {
  const r = document.getElementById("rationale");
  r.style.display = "block";

  let html = "<h3>Rationale (Level-4 Analysis)</h3>";
  q.options.forEach((o, i) => {
    html += `<p><b>Option ${i+1}:</b> ${o.rationale}</p>`;
  });

  html += `<h3>Pathophysiology Sketch</h3>
           <div class="patho">${q.patho}</div>`;
  r.innerHTML = html;
}

loadQuestion();
</script>

</body>
</html>
