<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SCFHS Classroom Rationale Engine</title>
<style>
body { font-family: Arial, sans-serif; background:#f4f6f8; margin:0; padding:0; }
.container { max-width:1000px; margin:auto; background:#fff; padding:25px; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
h2 { text-align:center; margin-bottom:20px; }
.option { margin:10px 0; padding:12px; border:1px solid #ccc; border-radius:6px; cursor:pointer; transition:0.2s; }
.option:hover { background:#f0f8ff; }
.correct { background:#d4edda; border-color:#28a745; }
.incorrect { background:#f8d7da; border-color:#dc3545; }
button { margin-top:15px; padding:10px 20px; font-size:16px; }
.hidden { display:none; }

.review { margin-top:20px; padding:15px; background:#f9fafb; border-left:5px solid #007bff; }

.tag { font-size:12px; padding:2px 6px; border-radius:4px; margin-left:6px; }
.SCFHS { background:#d4edda; }
.NCLEX { background:#cce5ff; }
.STR { background:#fff3cd; }
.SAFE_DELAY { background:#e2e3e5; }

.expand { margin-top:15px; background:#eef5ff; padding:12px; border-radius:6px; }
.expand pre { background:#fff; padding:10px; border:1px dashed #007bff; white-space:pre-wrap; }
.header { font-weight:bold; margin-top:10px; }

.progress-container { width:100%; background:#e2e3e5; border-radius:5px; overflow:hidden; margin-bottom:20px; }
.progress-bar { height:20px; width:0%; background:#007bff; text-align:center; color:#fff; line-height:20px; transition:0.3s; }

.jump-container { margin-bottom:20px; }
.jump-container input { width:60px; padding:6px; margin-right:10px; }
</style>
</head>
<body>

<div class="container">
<h2>SCFHS Classroom Rationale Engine</h2>

<div id="startDiv">
  <button id="startBtn">Start Quiz</button>
</div>

<div class="jump-container hidden" id="jumpDiv">
  Jump to question: 
  <input type="number" id="jumpInput" min="1">
  <button onclick="jumpToQuestion()">Go</button>
</div>

<div class="progress-container">
  <div class="progress-bar" id="progressBar">0%</div>
</div>

<div id="quiz" class="hidden"></div>
<div id="review" class="review hidden"></div>
<button onclick="nextQuestion()" id="nextBtn" class="hidden">Next Question</button>
</div>

<script>
// ================================
// QUESTION BANK
// ================================
const questions = [
  {
    q: "When a nurse places a febrile infant into cold water, how is heat primarily lost?",
    options: [
      { text: "Evaporation", tag: "SAFE_DELAY" },
      { text: "Convection", tag: "NCLEX" },
      { text: "Conduction", tag: "SCFHS" },
      { text: "Radiation", tag: "STR" }
    ],
    correctTag: "SCFHS",
    mechanism: "heatTransfer.conduction"
  },
  {
    q: "A 68-year-old postoperative patient becomes restless with BP 84/50, HR 128. What is the priority action?",
    options: [
      { text: "Start isotonic IV fluids", tag: "SCFHS" },
      { text: "Administer IV antibiotics", tag: "NCLEX" },
      { text: "Give furosemide", tag: "STR" },
      { text: "Obtain blood cultures", tag: "SAFE_DELAY" }
    ],
    correctTag: "SCFHS",
    mechanism: "shock.hypovolemic"
  },
  {
    q: "A patient with a new urinary catheter reports bright red urine in the drainage bag. What should the nurse technician do first?",
    options: [
      { text: "Continue monitoring", tag: "SAFE_DELAY" },
      { text: "Notify the nurse immediately", tag: "SCFHS" },
      { text: "Increase fluid intake", tag: "NCLEX" },
      { text: "Irrigate the catheter yourself", tag: "STR" }
    ],
    correctTag: "SCFHS",
    mechanism: "urinary.hematuria"
  },
  {
    q: "A patient develops redness, warmth, and swelling at an IV site while receiving antibiotics. The nurse technician should:",
    options: [
      { text: "Stop infusion and report to nurse", tag: "SCFHS" },
      { text: "Increase infusion rate", tag: "NCLEX" },
      { text: "Apply heat and continue infusion", tag: "STR" },
      { text: "Document and ignore", tag: "SAFE_DELAY" }
    ],
    correctTag: "SCFHS",
    mechanism: "iv.phlebitis"
  },
  {
    q: "When assisting a fall-risk patient with ambulation, the safest technique is to:",
    options: [
      { text: "Use a gait belt and walk slightly behind patient", tag: "SCFHS" },
      { text: "Hold patient’s forearm only", tag: "NCLEX" },
      { text: "Allow patient to walk independently", tag: "STR" },
      { text: "Walk in front while patient holds your shoulder", tag: "SAFE_DELAY" }
    ],
    correctTag: "SCFHS",
    mechanism: "safety.ambulation"
  },
  {
    q: "A confused patient repeatedly removes their oxygen cannula. The safest intervention is:",
    options: [
      { text: "Apply soft mitts and continue monitoring", tag: "SCFHS" },
      { text: "Restrain the patient’s arms immediately", tag: "STR" },
      { text: "Remove oxygen and let patient rest", tag: "SAFE_DELAY" },
      { text: "Put patient alone in a quiet room", tag: "NCLEX" }
    ],
    correctTag: "SCFHS",
    mechanism: "safety.oxygen"
  },
  {
    q: "A patient shows Kussmaul respirations. The nurse technician should recognize this as a sign of:",
    options: [
      { text: "Metabolic acidosis", tag: "SCFHS" },
      { text: "Heart failure", tag: "NCLEX" },
      { text: "Hypovolemia", tag: "STR" },
      { text: "Respiratory infection", tag: "SAFE_DELAY" }
    ],
    correctTag: "SCFHS",
    mechanism: "respiration.kussmaul"
  }
{
  q: "A patient suddenly becomes dizzy and pale while standing. What is the nurse technician’s first action?",
  options: [
    { text: "Assist patient to sit or lie down", tag: "SCFHS" },
    { text: "Encourage deep breathing", tag: "NCLEX" },
    { text: "Offer oral fluids immediately", tag: "STR" },
    { text: "Document the episode", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "safety.orthostatic"
},
{
  q: "A patient receiving oxygen via nasal cannula has dry nasal mucosa. What should the nurse technician do?",
  options: [
    { text: "Add humidification as ordered", tag: "SCFHS" },
    { text: "Remove oxygen periodically", tag: "STR" },
    { text: "Increase oxygen flow rate", tag: "NCLEX" },
    { text: "Ignore the complaint", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "respiration.oxygenDryness"
},
{
  q: "A postoperative patient reports calf pain and warmth. What is the PRIORITY action?",
  options: [
    { text: "Report findings to nurse immediately", tag: "SCFHS" },
    { text: "Massage the calf", tag: "STR" },
    { text: "Encourage ambulation", tag: "NCLEX" },
    { text: "Apply heating pad", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "circulation.dvt"
},
{
  q: "A patient with diabetes is sweating and shaky. What should the nurse technician suspect?",
  options: [
    { text: "Hypoglycemia", tag: "SCFHS" },
    { text: "Hyperglycemia", tag: "NCLEX" },
    { text: "Hypertension", tag: "STR" },
    { text: "Dehydration", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "endocrine.hypoglycemia"
},
{
  q: "During bed bath, the nurse technician notices non-blanchable redness on the sacrum. What is the correct action?",
  options: [
    { text: "Report to nurse immediately", tag: "SCFHS" },
    { text: "Massage the area", tag: "STR" },
    { text: "Apply powder only", tag: "NCLEX" },
    { text: "Ignore and continue bath", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "skin.pressureInjury"
},
{
  q: "A patient complains of sudden chest pain and shortness of breath. What should the nurse technician do FIRST?",
  options: [
    { text: "Report immediately to the nurse", tag: "SCFHS" },
    { text: "Place patient in supine position", tag: "NCLEX" },
    { text: "Give oral fluids", tag: "STR" },
    { text: "Document and observe", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "cardio.emergency"
},
{
  q: "A patient’s oxygen saturation drops to 88% on room air. What is the correct action?",
  options: [
    { text: "Apply oxygen as ordered and report", tag: "SCFHS" },
    { text: "Encourage coughing only", tag: "NCLEX" },
    { text: "Wait 10 minutes and recheck", tag: "SAFE_DELAY" },
    { text: "Ignore if patient feels fine", tag: "STR" }
  ],
  correctTag: "SCFHS",
  mechanism: "respiration.hypoxia"
},
{
  q: "A patient receiving IV fluids complains of swelling at the insertion site. What should the nurse technician do?",
  options: [
    { text: "Stop infusion and notify nurse", tag: "SCFHS" },
    { text: "Increase IV rate", tag: "NCLEX" },
    { text: "Massage the area", tag: "STR" },
    { text: "Continue and monitor later", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "iv.infiltration"
},
{
  q: "A patient is found on the floor beside the bed. What is the FIRST action?",
  options: [
    { text: "Stay with patient and call for help", tag: "SCFHS" },
    { text: "Lift patient back to bed", tag: "STR" },
    { text: "Document the incident", tag: "SAFE_DELAY" },
    { text: "Ask patient what happened", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "safety.fall"
},
{
  q: "A patient with dementia becomes agitated and attempts to climb out of bed. What should the nurse technician do?",
  options: [
    { text: "Stay with patient and notify nurse", tag: "SCFHS" },
    { text: "Apply restraints immediately", tag: "STR" },
    { text: "Leave patient to calm down", tag: "SAFE_DELAY" },
    { text: "Turn off the lights", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "safety.agitation"
},
{
  q: "A patient suddenly becomes diaphoretic and pale during vital signs assessment. What should the nurse technician do FIRST?",
  options: [
    { text: "Stop assessment and notify the nurse", tag: "SCFHS" },
    { text: "Finish taking vital signs", tag: "NCLEX" },
    { text: "Give the patient water", tag: "STR" },
    { text: "Document findings later", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "general.deterioration"
},
{
  q: "A patient’s blood pressure reading is significantly lower than previous readings. What is the correct action?",
  options: [
    { text: "Recheck BP and report to nurse", tag: "SCFHS" },
    { text: "Ignore and continue rounds", tag: "STR" },
    { text: "Document as normal variation", tag: "SAFE_DELAY" },
    { text: "Wait until next shift", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "vitals.hypotension"
},
{
  q: "A patient receiving oxygen complains of nasal dryness and discomfort. What should the nurse technician do?",
  options: [
    { text: "Report to nurse for humidification", tag: "SCFHS" },
    { text: "Remove oxygen temporarily", tag: "STR" },
    { text: "Apply petroleum jelly", tag: "NCLEX" },
    { text: "Ignore the complaint", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "respiration.oxygenComfort"
},
{
  q: "While assisting with feeding, a patient begins coughing and choking. What is the FIRST action?",
  options: [
    { text: "Stop feeding and notify nurse", tag: "SCFHS" },
    { text: "Encourage patient to continue eating", tag: "STR" },
    { text: "Offer more fluids", tag: "NCLEX" },
    { text: "Document the incident", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "nutrition.aspiration"
},
{
  q: "A patient with limited mobility has redness over the sacral area. What should the nurse technician do?",
  options: [
    { text: "Report skin changes to nurse", tag: "SCFHS" },
    { text: "Massage the area vigorously", tag: "STR" },
    { text: "Ignore unless skin is broken", tag: "SAFE_DELAY" },
    { text: "Apply heat pack", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "skin.pressureInjury"
},
{
  q: "While assisting a patient to the bathroom, the patient suddenly feels dizzy. What should the nurse technician do FIRST?",
  options: [
    { text: "Assist patient to sit or lie down and call nurse", tag: "SCFHS" },
    { text: "Encourage patient to walk slowly", tag: "NCLEX" },
    { text: "Leave patient briefly to get help", tag: "STR" },
    { text: "Document dizziness later", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "safety.dizziness"
},
{
  q: "A patient complains of pain at the surgical site rated 8/10. What is the nurse technician’s correct action?",
  options: [
    { text: "Report pain level to the nurse", tag: "SCFHS" },
    { text: "Administer prescribed analgesic", tag: "STR" },
    { text: "Tell patient pain is expected", tag: "NCLEX" },
    { text: "Reassess pain after one hour", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "pain.severe"
},
{
  q: "A patient receiving enteral feeding has abdominal distention and nausea. What should the nurse technician do?",
  options: [
    { text: "Stop feeding and notify nurse", tag: "SCFHS" },
    { text: "Increase feeding rate", tag: "STR" },
    { text: "Encourage deep breathing", tag: "NCLEX" },
    { text: "Continue feeding and document", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "nutrition.intolerance"
},
{
  q: "During bed making, a nurse technician notices wet bedding from urine. What is the priority action?",
  options: [
    { text: "Change bedding and assess skin", tag: "SCFHS" },
    { text: "Wait until next scheduled care", tag: "SAFE_DELAY" },
    { text: "Cover with a towel temporarily", tag: "STR" },
    { text: "Document without intervention", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "hygiene.incontinence"
},
{
  q: "A patient scheduled for transport becomes anxious and short of breath. What should the nurse technician do?",
  options: [
    { text: "Stay with patient and notify nurse", tag: "SCFHS" },
    { text: "Proceed with transport quickly", tag: "STR" },
    { text: "Tell patient to calm down", tag: "NCLEX" },
    { text: "Delay action until transport arrives", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "general.anxiety"
},
{
  q: "A patient complains of sudden nausea and appears pale during morning care. What should the nurse technician do FIRST?",
  options: [
    { text: "Stop care and notify the nurse", tag: "SCFHS" },
    { text: "Encourage the patient to finish care", tag: "NCLEX" },
    { text: "Provide food immediately", tag: "STR" },
    { text: "Document and continue later", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "general.nausea"
},
{
  q: "A patient’s IV pump alarm indicates occlusion. What is the correct action for the nurse technician?",
  options: [
    { text: "Check tubing for kinks and report to nurse", tag: "SCFHS" },
    { text: "Silence alarm and continue infusion", tag: "STR" },
    { text: "Increase IV rate", tag: "NCLEX" },
    { text: "Turn off pump and leave", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "iv.occlusion"
},
{
  q: "A patient with limited mobility reports heel pain. What should the nurse technician do?",
  options: [
    { text: "Inspect heels and report findings", tag: "SCFHS" },
    { text: "Ignore unless skin is broken", tag: "SAFE_DELAY" },
    { text: "Massage heels firmly", tag: "STR" },
    { text: "Apply heat pad", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "skin.pressureRisk"
},
{
  q: "A patient suddenly becomes confused and disoriented. What is the nurse technician’s priority?",
  options: [
    { text: "Ensure safety and notify nurse", tag: "SCFHS" },
    { text: "Ask orientation questions only", tag: "NCLEX" },
    { text: "Leave patient to rest", tag: "SAFE_DELAY" },
    { text: "Apply restraints immediately", tag: "STR" }
  ],
  correctTag: "SCFHS",
  mechanism: "neuro.acuteConfusion"
},
{
  q: "A patient receiving oxygen therapy is found with the nasal cannula removed. What should the nurse technician do?",
  options: [
    { text: "Reapply oxygen and notify nurse", tag: "SCFHS" },
    { text: "Leave oxygen off temporarily", tag: "SAFE_DELAY" },
    { text: "Document and continue rounds", tag: "NCLEX" },
    { text: "Discontinue oxygen therapy", tag: "STR" }
  ],
  correctTag: "SCFHS",
  mechanism: "respiration.oxygenDisruption"
},
{
  q: "While transferring a patient from bed to wheelchair, the patient suddenly becomes dizzy. What should the nurse technician do FIRST?",
  options: [
    { text: "Lower the patient back to bed safely", tag: "SCFHS" },
    { text: "Call for help immediately", tag: "NCLEX" },
    { text: "Encourage the patient to continue transfer", tag: "STR" },
    { text: "Document the incident later", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "mobility.dizziness"
},
{
  q: "A patient with diabetes asks the nurse technician to check blood glucose because they feel shaky. What is the correct action?",
  options: [
    { text: "Inform the nurse immediately", tag: "SCFHS" },
    { text: "Provide juice without checking", tag: "STR" },
    { text: "Tell the patient to rest", tag: "SAFE_DELAY" },
    { text: "Reassure and recheck later", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "endocrine.hypoglycemiaRisk"
},
{
  q: "The nurse technician notices redness on a patient’s sacral area during bathing. What is the BEST action?",
  options: [
    { text: "Report findings to the nurse", tag: "SCFHS" },
    { text: "Apply powder to the area", tag: "STR" },
    { text: "Ignore unless skin is broken", tag: "SAFE_DELAY" },
    { text: "Massage the area gently", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "skin.pressureInjury"
},
{
  q: "A patient receiving IV fluids complains of pain at the IV site. The area appears swollen. What should the nurse technician do?",
  options: [
    { text: "Stop infusion and notify nurse", tag: "SCFHS" },
    { text: "Slow the infusion rate", tag: "NCLEX" },
    { text: "Apply warm compress", tag: "STR" },
    { text: "Document and reassess later", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "iv.infiltration"
},
{
  q: "A confused patient is attempting to climb out of bed. What is the nurse technician’s PRIORITY action?",
  options: [
    { text: "Stay with patient and call the nurse", tag: "SCFHS" },
    { text: "Apply restraints immediately", tag: "STR" },
    { text: "Raise all side rails and leave", tag: "NCLEX" },
    { text: "Document behavior", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "safety.fallRisk"
},
{
  q: "A patient’s urinary catheter bag is noted to be overfilled. What should the nurse technician do?",
  options: [
    { text: "Empty the bag using aseptic technique", tag: "SCFHS" },
    { text: "Clamp the catheter tubing", tag: "STR" },
    { text: "Wait until the nurse arrives", tag: "SAFE_DELAY" },
    { text: "Disconnect tubing briefly", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "urinary.catheterCare"
},
{
  q: "A patient complains of shortness of breath while lying flat. What should the nurse technician do FIRST?",
  options: [
    { text: "Elevate the head of the bed", tag: "SCFHS" },
    { text: "Apply oxygen independently", tag: "STR" },
    { text: "Notify the nurse immediately", tag: "NCLEX" },
    { text: "Reassure the patient", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "respiration.orthopnea"
},
{
  q: "During feeding, a patient begins coughing and choking. What is the nurse technician’s immediate action?",
  options: [
    { text: "Stop feeding and position patient upright", tag: "SCFHS" },
    { text: "Encourage patient to continue eating", tag: "STR" },
    { text: "Offer water to clear throat", tag: "NCLEX" },
    { text: "Document and monitor", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "nutrition.aspirationRisk"
},
{
  q: "A patient reports pain rated 8/10. What is the nurse technician’s role?",
  options: [
    { text: "Report pain level to the nurse", tag: "SCFHS" },
    { text: "Administer PRN analgesic", tag: "STR" },
    { text: "Reposition and reassess later", tag: "NCLEX" },
    { text: "Tell patient pain is expected", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "pain.reporting"
},
{
  q: "A patient is scheduled for surgery and asks about the procedure. What should the nurse technician do?",
  options: [
    { text: "Refer questions to the nurse", tag: "SCFHS" },
    { text: "Explain the surgery briefly", tag: "STR" },
    { text: "Provide reassurance only", tag: "NCLEX" },
    { text: "Avoid answering and leave", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "legal.scopeOfPractice"
},
{
  q: "A patient suddenly becomes diaphoretic and weak while ambulating. What is the FIRST action?",
  options: [
    { text: "Assist patient to sit or lie down", tag: "SCFHS" },
    { text: "Call the nurse immediately", tag: "NCLEX" },
    { text: "Encourage patient to continue walking", tag: "STR" },
    { text: "Document incident later", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "mobility.syncopeRisk"
},
{
  q: "The nurse technician notes a patient’s oxygen saturation dropped from 96% to 88%. What is the correct action?",
  options: [
    { text: "Report immediately to the nurse", tag: "SCFHS" },
    { text: "Increase oxygen flow rate", tag: "STR" },
    { text: "Recheck in 30 minutes", tag: "SAFE_DELAY" },
    { text: "Document only", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "respiration.hypoxia"
},
{
  q: "A patient refuses a bath. What is the appropriate nurse technician response?",
  options: [
    { text: "Respect refusal and inform nurse", tag: "SCFHS" },
    { text: "Insist on completing care", tag: "STR" },
    { text: "Ignore patient and leave", tag: "SAFE_DELAY" },
    { text: "Document refusal only", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "ethics.patientRights"
},
{
  q: "A patient has not voided for 8 hours. What should the nurse technician do?",
  options: [
    { text: "Report the finding to the nurse", tag: "SCFHS" },
    { text: "Encourage fluids without reporting", tag: "NCLEX" },
    { text: "Insert catheter", tag: "STR" },
    { text: "Wait until next shift", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "urinary.retention"
},
{
  q: "While making rounds, the nurse technician smells smoke in a patient room. What is the FIRST action?",
  options: [
    { text: "Ensure patient safety and call for help", tag: "SCFHS" },
    { text: "Investigate source alone", tag: "NCLEX" },
    { text: "Ignore if no flames seen", tag: "SAFE_DELAY" },
    { text: "Open windows immediately", tag: "STR" }
  ],
  correctTag: "SCFHS",
  mechanism: "emergency.fireSafety"
},
{
  q: "A patient in the ICU suddenly becomes unresponsive. What is the FIRST action of the nurse technician?",
  options: [
    { text: "Call for help and activate emergency response", tag: "SCFHS" },
    { text: "Check vital signs", tag: "NCLEX" },
    { text: "Begin CPR independently", tag: "STR" },
    { text: "Document the event", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.cardiacArrest"
},
{
  q: "A ventilated patient’s alarm is sounding and the patient appears distressed. What should the nurse technician do FIRST?",
  options: [
    { text: "Check patient and tubing, then call nurse", tag: "SCFHS" },
    { text: "Silence the alarm", tag: "STR" },
    { text: "Increase oxygen flow", tag: "NCLEX" },
    { text: "Wait for respiratory therapist", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.ventilatorAlarm"
},
{
  q: "A patient receiving blood transfusion develops chills and fever. What is the PRIORITY action?",
  options: [
    { text: "Stop transfusion and notify nurse immediately", tag: "SCFHS" },
    { text: "Slow the transfusion rate", tag: "NCLEX" },
    { text: "Provide warm blankets", tag: "STR" },
    { text: "Document reaction", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.transfusionReaction"
},
{
  q: "A post-operative patient suddenly complains of chest pain and shortness of breath. What should the nurse technician do FIRST?",
  options: [
    { text: "Call for immediate medical assistance", tag: "SCFHS" },
    { text: "Position patient upright", tag: "NCLEX" },
    { text: "Apply oxygen without order", tag: "STR" },
    { text: "Reassure the patient", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "er.pulmonaryEmbolism"
},
{
  q: "A patient in restraints is found cyanotic and not breathing. What is the FIRST action?",
  options: [
    { text: "Remove restraints and call for help", tag: "SCFHS" },
    { text: "Check pulse", tag: "NCLEX" },
    { text: "Document incident", tag: "SAFE_DELAY" },
    { text: "Wait for the nurse", tag: "STR" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.restraintEmergency"
},
{
  q: "During a mass casualty incident, which patient should be attended to FIRST?",
  options: [
    { text: "Patient with airway obstruction", tag: "SCFHS" },
    { text: "Patient with open fracture", tag: "NCLEX" },
    { text: "Patient with minor burns", tag: "STR" },
    { text: "Patient walking and crying", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "disaster.triage"
},
{
  q: "A patient suddenly vomits and becomes unconscious. What is the FIRST action?",
  options: [
    { text: "Turn patient to side to protect airway", tag: "SCFHS" },
    { text: "Call the nurse", tag: "NCLEX" },
    { text: "Insert oral airway", tag: "STR" },
    { text: "Document event", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "er.airwayProtection"
},
{
  q: "An ICU patient’s blood pressure drops rapidly. What should the nurse technician do?",
  options: [
    { text: "Notify nurse immediately", tag: "SCFHS" },
    { text: "Recheck BP in 15 minutes", tag: "SAFE_DELAY" },
    { text: "Increase IV fluids", tag: "STR" },
    { text: "Document the finding", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.hypotension"
},
{
  q: "A patient receiving tube feeding develops sudden coughing and respiratory distress. What is the FIRST action?",
  options: [
    { text: "Stop feeding and elevate head of bed", tag: "SCFHS" },
    { text: "Suction immediately", tag: "NCLEX" },
    { text: "Notify nurse before action", tag: "SAFE_DELAY" },
    { text: "Flush feeding tube", tag: "STR" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.aspiration"
},
{
  q: "A patient collapses in the hallway. What is the nurse technician’s FIRST response?",
  options: [
    { text: "Call emergency response and stay with patient", tag: "SCFHS" },
    { text: "Check blood pressure", tag: "NCLEX" },
    { text: "Move patient to bed", tag: "STR" },
    { text: "Document incident", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "er.collapse"
},
{
  q: "A patient suddenly starts seizing. What should the nurse technician do FIRST?",
  options: [
    { text: "Protect patient from injury and call for help", tag: "SCFHS" },
    { text: "Insert object into mouth", tag: "STR" },
    { text: "Restrain the patient", tag: "NCLEX" },
    { text: "Document seizure activity", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "neuro.seizure"
},
{
  q: "A fire alarm activates in the ICU. What is the FIRST priority?",
  options: [
    { text: "Ensure patient safety and follow fire protocol", tag: "SCFHS" },
    { text: "Finish current task", tag: "SAFE_DELAY" },
    { text: "Investigate source alone", tag: "NCLEX" },
    { text: "Open all windows", tag: "STR" }
  ],
  correctTag: "SCFHS",
  mechanism: "disaster.fire"
},
{
  q: "A patient becomes suddenly aggressive and threatens staff. What is the nurse technician’s priority?",
  options: [
    { text: "Ensure safety and call for assistance", tag: "SCFHS" },
    { text: "Attempt verbal counseling alone", tag: "NCLEX" },
    { text: "Apply restraints immediately", tag: "STR" },
    { text: "Document behavior", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "psychiatric.violence"
},
{
  q: "A patient is found on the floor after a loud noise. What is the FIRST action?",
  options: [
    { text: "Assess patient and call for help", tag: "SCFHS" },
    { text: "Help patient back to bed", tag: "STR" },
    { text: "Ask what happened", tag: "NCLEX" },
    { text: "Complete incident report", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "safety.fall"
},
{
  q: "A patient suddenly stops breathing while on the ward. What should the nurse technician do FIRST?",
  options: [
    { text: "Activate emergency response system", tag: "SCFHS" },
    { text: "Check oxygen equipment", tag: "NCLEX" },
    { text: "Begin ventilation without help", tag: "STR" },
    { text: "Document findings", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "er.respiratoryArrest"
},

];

// ================================
// RATIONALE LIBRARY
// ================================
const rationaleLibrary = {
  heatTransfer: {
    conduction: {
      correct: "Direct contact transfers heat from warm skin to cold water.",
      distractors: {
        SAFE_DELAY: "Evaporation requires liquid turning to vapor, not immersion.",
        NCLEX: "Convection involves moving air or fluid, not direct contact.",
        STR: "Radiation transfers heat without contact."
      },
      exam: "Conduction → direct contact\nConvection → moving air/fluid\nRadiation → no contact\nEvaporation → liquid to vapor",
      patho: "Immersion → thermal gradient → heat flows from skin to water → core temperature decreases",
      intuitive: "Touch ice = conduction\nCold wind = convection\nSun = radiation\nSweat drying = evaporation"
    }
  },
  shock: {
    hypovolemic: {
      correct: "Rapid isotonic fluid administration restores circulating volume and tissue perfusion.",
      distractors: {
        NCLEX: "Antibiotics do not correct hypotension immediately.",
        STR: "Diuretics worsen volume depletion.",
        SAFE_DELAY: "Diagnostic actions delay life-saving intervention."
      },
      exam: "Hypovolemia → ↓ preload → ↓ cardiac output → ↓ MAP → organ hypoperfusion",
      patho: "Fluid loss → ↓ venous return → ↓ stroke volume → ↓ MAP → organ hypoperfusion",
      intuitive: "Empty tank = low pressure → organs starve → need fluid replacement"
    }
  },
  urinary: {
    hematuria: {
      correct: "Bright red urine may indicate trauma or bleeding; notify the nurse immediately for assessment.",
      distractors: {
        SAFE_DELAY: "Continuing to monitor delays potentially critical intervention.",
        NCLEX: "Increasing fluids alone does not address potential bleeding.",
        STR: "Catheter irrigation should not be performed without a nurse order."
      },
      exam: "Hematuria → assess source → notify nurse → prevent complications",
      patho: "Trauma/anticoagulation → bleeding into urinary tract → red urine",
      intuitive: "Red urine = alert nurse → don't ignore"
    }
  },
  iv: {
    phlebitis: {
      correct: "Redness, warmth, and swelling indicate IV phlebitis; stop infusion and notify nurse.",
      distractors: {
        NCLEX: "Increasing infusion rate worsens irritation.",
        STR: "Applying heat without stopping infusion is unsafe.",
        SAFE_DELAY: "Ignoring or documenting delays proper intervention."
      },
      exam: "IV phlebitis → stop infusion → notify nurse → prevent complications",
      patho: "Irritation/infection → endothelial inflammation → redness/swelling",
      intuitive: "Hot, red IV site = stop and call nurse"
    }
  },
  safety: {
    ambulation: {
      correct: "Using a gait belt and positioning yourself slightly behind reduces fall risk safely.",
      distractors: {
        NCLEX: "Holding forearm alone is unsafe for high-risk patient.",
        STR: "Walking independently increases fall risk.",
        SAFE_DELAY: "Walking in front doesn't provide safe support."
      },
      exam: "Fall-risk patient → gait belt → proper positioning → prevent injury",
      patho: "Unsteady patient → inadequate support → increased fall likelihood",
      intuitive: "Support belt = safety → be ready behind patient"
    },
    oxygen: {
      correct: "Use least restrictive intervention (soft mitts) and monitor patient.",
      distractors: {
        STR: "Physical restraints are last-resort and increase harm risk.",
        SAFE_DELAY: "Removing oxygen delays care.",
        NCLEX: "Isolating patient does not ensure safety or oxygenation."
      },
      exam: "Confused patient → prevent self-harm → least restrictive → monitor",
      patho: "Confusion → risk of removing oxygen → hypoxia",
      intuitive: "Keep oxygen in place safely without harming patient"
    }
  },
  respiration: {
    kussmaul: {
      correct: "Kussmaul respirations indicate metabolic acidosis, commonly diabetic ketoacidosis.",
      distractors: {
        NCLEX: "Heart failure presents differently.",
        STR: "Hypovolemia does not typically cause deep, rapid breathing.",
        SAFE_DELAY: "Respiratory infection may alter pattern but not Kussmaul."
      },
      exam: "Deep, rapid breathing → metabolic acidosis → assess cause",
      patho: "Acidosis → chemoreceptor stimulation → deep, rapid breaths",
      intuitive: "Fast, deep breaths = body trying to blow off acid"
    }
  },
safety: {
  orthostatic: {
    correct: "Sitting or lying the patient down prevents falls and improves cerebral perfusion.",
    distractors: {
      NCLEX: "Breathing does not correct sudden blood pressure drop.",
      STR: "Oral fluids are not first priority during acute dizziness.",
      SAFE_DELAY: "Documentation delays immediate safety intervention."
    },
    exam: "Orthostatic hypotension → dizziness → prevent fall",
    patho: "Sudden position change → ↓ cerebral perfusion → dizziness",
    intuitive: "Dizzy patient = sit them down NOW"
  }
},
respiration: {
  oxygenDryness: {
    correct: "Humidification prevents mucosal dryness and irritation during oxygen therapy.",
    distractors: {
      STR: "Removing oxygen compromises oxygenation.",
      NCLEX: "Increasing flow worsens dryness.",
      SAFE_DELAY: "Ignoring discomfort causes complications."
    },
    exam: "Oxygen therapy → dryness → humidify",
    patho: "Dry oxygen → mucosal irritation → bleeding risk",
    intuitive: "Dry nose + oxygen = add humidity"
  }
},
circulation: {
  dvt: {
    correct: "Calf pain and warmth indicate possible DVT and must be reported immediately.",
    distractors: {
      STR: "Massage may dislodge a clot.",
      NCLEX: "Ambulation may worsen embolization risk.",
      SAFE_DELAY: "Heat increases circulation and clot risk."
    },
    exam: "DVT signs → report immediately → prevent PE",
    patho: "Venous stasis → clot formation → embolization risk",
    intuitive: "Painful warm calf = DO NOT TOUCH → report"
  }
},
endocrine: {
  hypoglycemia: {
    correct: "Sweating and shakiness are classic signs of hypoglycemia.",
    distractors: {
      NCLEX: "Hyperglycemia presents with thirst and polyuria.",
      STR: "Hypertension does not cause tremors.",
      SAFE_DELAY: "Dehydration does not cause sudden sweating."
    },
    exam: "Shaky + sweaty → low blood sugar",
    patho: "Low glucose → sympathetic activation → tremor, diaphoresis",
    intuitive: "Cold sweat = sugar LOW"
  }
},
skin: {
  pressureInjury: {
    correct: "Non-blanchable redness indicates early pressure injury and must be reported.",
    distractors: {
      STR: "Massage worsens tissue damage.",
      NCLEX: "Powder does not treat pressure injury.",
      SAFE_DELAY: "Ignoring leads to ulcer progression."
    },
    exam: "Non-blanchable redness = Stage 1 pressure injury",
    patho: "Pressure → ischemia → tissue damage",
    intuitive: "Red that stays red = report fast"
  }
},
cardio: {
  emergency: {
    correct: "Chest pain with shortness of breath is a medical emergency and must be reported immediately.",
    distractors: {
      NCLEX: "Positioning does not address the emergency.",
      STR: "Fluids may worsen condition.",
      SAFE_DELAY: "Observation delays life-saving care."
    },
    exam: "Chest pain + SOB → report immediately",
    patho: "Cardiac ischemia → decreased oxygen → tissue injury",
    intuitive: "Chest pain = call nurse NOW"
  }
},
respiration: {
  hypoxia: {
    correct: "Oxygen should be applied as ordered and the nurse notified.",
    distractors: {
      NCLEX: "Coughing alone does not correct hypoxia.",
      SAFE_DELAY: "Waiting worsens oxygen deprivation.",
      STR: "Ignoring hypoxia is unsafe."
    },
    exam: "SpO₂ < 90% → oxygen + report",
    patho: "Low oxygen → cellular hypoxia → organ damage",
    intuitive: "Low SpO₂ = oxygen first"
  }
},
iv: {
  infiltration: {
    correct: "Swelling indicates IV infiltration; stop infusion and notify nurse.",
    distractors: {
      NCLEX: "Increasing rate worsens infiltration.",
      STR: "Massage damages tissue.",
      SAFE_DELAY: "Delay increases injury."
    },
    exam: "IV swelling → stop infusion → report",
    patho: "Fluid leaks into tissue → edema → pain",
    intuitive: "Puffy IV = STOP"
  }
},
safety: {
  fall: {
    correct: "Patient safety comes first—stay with patient and call for help.",
    distractors: {
      STR: "Lifting alone risks injury.",
      SAFE_DELAY: "Documentation comes later.",
      NCLEX: "Questioning delays safety assessment."
    },
    exam: "Fall → assess → call for help",
    patho: "Fall → possible injury → need assessment",
    intuitive: "Fall = don’t leave patient"
  },
  agitation: {
    correct: "Staying with the patient prevents injury and allows escalation.",
    distractors: {
      STR: "Restraints require order.",
      SAFE_DELAY: "Leaving patient risks falls.",
      NCLEX: "Environmental changes alone are insufficient."
    },
    exam: "Agitation → safety → notify nurse",
    patho: "Cognitive impairment → unsafe behavior",
    intuitive: "Unsafe patient = stay close"
  }
},
general: {
  deterioration: {
    correct: "Sudden diaphoresis and pallor indicate possible clinical deterioration and must be reported immediately.",
    distractors: {
      NCLEX: "Continuing assessment delays intervention.",
      STR: "Giving fluids without assessment is unsafe.",
      SAFE_DELAY: "Documentation comes after patient safety."
    },
    exam: "Sudden change → stop → report",
    patho: "Reduced perfusion → sympathetic response → diaphoresis, pallor",
    intuitive: "Pale + sweaty = something wrong"
  }
},
vitals: {
  hypotension: {
    correct: "Abnormal vital signs must be verified and reported promptly.",
    distractors: {
      STR: "Ignoring may delay treatment.",
      SAFE_DELAY: "Documenting without action is unsafe.",
      NCLEX: "Waiting increases risk."
    },
    exam: "Low BP → recheck → report",
    patho: "Low pressure → decreased organ perfusion",
    intuitive: "Low BP = double-check and call"
  }
},
respiration: {
  oxygenComfort: {
    correct: "Oxygen-related discomfort should be addressed safely through humidification as ordered.",
    distractors: {
      STR: "Removing oxygen may cause hypoxia.",
      NCLEX: "Petroleum products are unsafe with oxygen.",
      SAFE_DELAY: "Ignoring discomfort affects compliance."
    },
    exam: "Oxygen discomfort → report → adjust safely",
    patho: "Dry oxygen → mucosal irritation",
    intuitive: "Dry nose on O₂ = tell nurse"
  }
},
nutrition: {
  aspiration: {
    correct: "Coughing and choking indicate aspiration risk; feeding must stop immediately.",
    distractors: {
      STR: "Continuing feeding increases aspiration.",
      NCLEX: "Fluids worsen choking.",
      SAFE_DELAY: "Documentation delays intervention."
    },
    exam: "Choking → stop feeding → report",
    patho: "Impaired swallow → airway compromise",
    intuitive: "Coughing while eating = STOP"
  }
},
skin: {
  pressureInjury: {
    correct: "Early redness is a sign of pressure injury and must be reported promptly.",
    distractors: {
      STR: "Massage increases tissue damage.",
      SAFE_DELAY: "Waiting allows progression.",
      NCLEX: "Heat worsens tissue injury."
    },
    exam: "Red skin → report early",
    patho: "Prolonged pressure → ischemia → skin damage",
    intuitive: "Red skin = warning sign"
  }
},
safety: {
  dizziness: {
    correct: "Dizziness increases fall risk; the patient must be supported immediately and the nurse notified.",
    distractors: {
      NCLEX: "Walking may cause a fall.",
      STR: "Leaving patient alone is unsafe.",
      SAFE_DELAY: "Documentation comes after safety."
    },
    exam: "Dizziness → sit/lie down → report",
    patho: "Reduced cerebral perfusion → dizziness → fall risk",
    intuitive: "Dizzy patient = sit them down NOW"
  }
},
pain: {
  severe: {
    correct: "Pain assessment must be reported so the nurse can intervene appropriately.",
    distractors: {
      STR: "Medication administration is outside technician scope.",
      NCLEX: "Dismissal invalidates pain assessment.",
      SAFE_DELAY: "Waiting prolongs suffering."
    },
    exam: "High pain score → report",
    patho: "Tissue injury → nociceptor activation → pain",
    intuitive: "High pain = call nurse"
  }
},
nutrition: {
  intolerance: {
    correct: "Abdominal distention and nausea indicate feeding intolerance and require immediate action.",
    distractors: {
      STR: "Increasing feeding worsens symptoms.",
      NCLEX: "Breathing does not resolve intolerance.",
      SAFE_DELAY: "Continuing feeding increases risk."
    },
    exam: "Feeding intolerance → stop → report",
    patho: "Delayed gastric emptying → distention → nausea",
    intuitive: "Bloated + nauseous = stop feeding"
  }
},
hygiene: {
  incontinence: {
    correct: "Wet bedding increases skin breakdown risk; prompt hygiene and assessment are required.",
    distractors: {
      SAFE_DELAY: "Waiting allows skin injury.",
      STR: "Temporary covering does not protect skin.",
      NCLEX: "Documentation alone is insufficient."
    },
    exam: "Wet skin → clean → assess",
    patho: "Moisture → skin maceration → breakdown",
    intuitive: "Wet bed = skin danger"
  }
},
general: {
  anxiety: {
    correct: "Anxiety with shortness of breath may signal deterioration and requires immediate attention.",
    distractors: {
      STR: "Transporting unstable patient is unsafe.",
      NCLEX: "Reassurance alone is inadequate.",
      SAFE_DELAY: "Delaying action increases risk."
    },
    exam: "Anxiety + SOB → stay → report",
    patho: "Stress response → hyperventilation → dyspnea",
    intuitive: "Anxious + SOB = don’t leave"
  }
},
general: {
  nausea: {
    correct: "Sudden nausea and pallor may indicate clinical instability and require immediate reporting.",
    distractors: {
      NCLEX: "Continuing care delays assessment.",
      STR: "Food may worsen nausea.",
      SAFE_DELAY: "Documentation comes after safety."
    },
    exam: "Sudden nausea → stop → report",
    patho: "Autonomic response → decreased perfusion → nausea",
    intuitive: "Pale + nauseous = stop and call"
  }
},
iv: {
  occlusion: {
    correct: "Occlusion alarms require checking for simple causes and reporting to the nurse.",
    distractors: {
      STR: "Silencing alarm ignores problem.",
      NCLEX: "Increasing rate worsens pressure.",
      SAFE_DELAY: "Turning off pump delays therapy."
    },
    exam: "IV alarm → assess tubing → report",
    patho: "Blocked flow → interrupted infusion",
    intuitive: "Pump alarm = check and tell nurse"
  }
},
skin: {
  pressureRisk: {
    correct: "Heel pain may signal early pressure injury and must be assessed and reported.",
    distractors: {
      SAFE_DELAY: "Waiting allows injury progression.",
      STR: "Massage damages tissue.",
      NCLEX: "Heat increases injury risk."
    },
    exam: "Heel pain → inspect → report",
    patho: "Pressure → ischemia → tissue damage",
    intuitive: "Heel pain = pressure warning"
  }
},
neuro: {
  acuteConfusion: {
    correct: "Acute confusion is a safety risk and requires immediate nurse notification.",
    distractors: {
      NCLEX: "Assessment alone is insufficient.",
      SAFE_DELAY: "Leaving patient increases risk.",
      STR: "Restraints require orders."
    },
    exam: "Sudden confusion → safety → report",
    patho: "Hypoxia/metabolic change → altered cognition",
    intuitive: "Sudden confusion = don’t ignore"
  }
},
respiration: {
  oxygenDisruption: {
    correct: "Oxygen therapy must be restored promptly and the nurse informed.",
    distractors: {
      SAFE_DELAY: "Leaving oxygen off risks hypoxia.",
      NCLEX: "Documentation alone delays care.",
      STR: "Discontinuation requires an order."
    },
    exam: "Oxygen off → reapply → report",
    patho: "Interrupted oxygen → hypoxemia",
    intuitive: "O₂ off = put it back"
  }
},
rationaleLibrary.icu = {

  cardiacArrest: {
    correct: "Unresponsiveness may indicate cardiac arrest. Immediate activation of the emergency response system ensures rapid advanced life support.",
    distractors: {
      NCLEX: "Checking vital signs delays emergency activation.",
      STR: "CPR should begin after activating emergency response.",
      SAFE_DELAY: "Documentation is never the first action in an emergency."
    },
    exam: "Unresponsive patient → activate code → begin life-saving measures",
    patho: "Cardiac arrest → loss of circulation → rapid hypoxia → death if delayed",
    intuitive: "No response = call for help NOW"
  },

  ventilatorAlarm: {
    correct: "Always assess the patient and equipment first, then notify the nurse to prevent hypoxia or disconnection.",
    distractors: {
      STR: "Silencing alarms without assessment is unsafe.",
      NCLEX: "Adjusting oxygen without cause may worsen condition.",
      SAFE_DELAY: "Waiting risks respiratory failure."
    },
    exam: "Vent alarm → check patient → check tubing → notify nurse",
    patho: "Vent malfunction or disconnection → inadequate ventilation → hypoxia",
    intuitive: "Alarm = patient first, machine second"
  },

  transfusionReaction: {
    correct: "Stopping the transfusion immediately prevents further exposure to the triggering blood product.",
    distractors: {
      NCLEX: "Slowing infusion still exposes patient to antigen.",
      STR: "Comfort measures do not stop the reaction.",
      SAFE_DELAY: "Documentation comes after stabilization."
    },
    exam: "Transfusion reaction → stop transfusion → notify nurse → maintain IV access",
    patho: "Immune response → cytokine release → fever, chills, hemolysis",
    intuitive: "Bad reaction = STOP the blood"
  },

{
  q: "While transferring a patient from bed to wheelchair, the patient suddenly becomes dizzy. What should the nurse technician do FIRST?",
  options: [
    { text: "Lower the patient back to bed safely", tag: "SCFHS" },
    { text: "Call for help immediately", tag: "NCLEX" },
    { text: "Encourage the patient to continue transfer", tag: "STR" },
    { text: "Document the incident later", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "mobility.dizziness"
},
{
  q: "A patient with diabetes asks the nurse technician to check blood glucose because they feel shaky. What is the correct action?",
  options: [
    { text: "Inform the nurse immediately", tag: "SCFHS" },
    { text: "Provide juice without checking", tag: "STR" },
    { text: "Tell the patient to rest", tag: "SAFE_DELAY" },
    { text: "Reassure and recheck later", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "endocrine.hypoglycemiaRisk"
},
{
  q: "The nurse technician notices redness on a patient’s sacral area during bathing. What is the BEST action?",
  options: [
    { text: "Report findings to the nurse", tag: "SCFHS" },
    { text: "Apply powder to the area", tag: "STR" },
    { text: "Ignore unless skin is broken", tag: "SAFE_DELAY" },
    { text: "Massage the area gently", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "skin.pressureInjury"
},
{
  q: "A patient receiving IV fluids complains of pain at the IV site. The area appears swollen. What should the nurse technician do?",
  options: [
    { text: "Stop infusion and notify nurse", tag: "SCFHS" },
    { text: "Slow the infusion rate", tag: "NCLEX" },
    { text: "Apply warm compress", tag: "STR" },
    { text: "Document and reassess later", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "iv.infiltration"
},
{
  q: "A confused patient is attempting to climb out of bed. What is the nurse technician’s PRIORITY action?",
  options: [
    { text: "Stay with patient and call the nurse", tag: "SCFHS" },
    { text: "Apply restraints immediately", tag: "STR" },
    { text: "Raise all side rails and leave", tag: "NCLEX" },
    { text: "Document behavior", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "safety.fallRisk"
},
{
  q: "A patient’s urinary catheter bag is noted to be overfilled. What should the nurse technician do?",
  options: [
    { text: "Empty the bag using aseptic technique", tag: "SCFHS" },
    { text: "Clamp the catheter tubing", tag: "STR" },
    { text: "Wait until the nurse arrives", tag: "SAFE_DELAY" },
    { text: "Disconnect tubing briefly", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "urinary.catheterCare"
},
{
  q: "A patient complains of shortness of breath while lying flat. What should the nurse technician do FIRST?",
  options: [
    { text: "Elevate the head of the bed", tag: "SCFHS" },
    { text: "Apply oxygen independently", tag: "STR" },
    { text: "Notify the nurse immediately", tag: "NCLEX" },
    { text: "Reassure the patient", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "respiration.orthopnea"
},
{
  q: "During feeding, a patient begins coughing and choking. What is the nurse technician’s immediate action?",
  options: [
    { text: "Stop feeding and position patient upright", tag: "SCFHS" },
    { text: "Encourage patient to continue eating", tag: "STR" },
    { text: "Offer water to clear throat", tag: "NCLEX" },
    { text: "Document and monitor", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "nutrition.aspirationRisk"
},
{
  q: "A patient reports pain rated 8/10. What is the nurse technician’s role?",
  options: [
    { text: "Report pain level to the nurse", tag: "SCFHS" },
    { text: "Administer PRN analgesic", tag: "STR" },
    { text: "Reposition and reassess later", tag: "NCLEX" },
    { text: "Tell patient pain is expected", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "pain.reporting"
},
{
  q: "A patient is scheduled for surgery and asks about the procedure. What should the nurse technician do?",
  options: [
    { text: "Refer questions to the nurse", tag: "SCFHS" },
    { text: "Explain the surgery briefly", tag: "STR" },
    { text: "Provide reassurance only", tag: "NCLEX" },
    { text: "Avoid answering and leave", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "legal.scopeOfPractice"
},
{
  q: "A patient suddenly becomes diaphoretic and weak while ambulating. What is the FIRST action?",
  options: [
    { text: "Assist patient to sit or lie down", tag: "SCFHS" },
    { text: "Call the nurse immediately", tag: "NCLEX" },
    { text: "Encourage patient to continue walking", tag: "STR" },
    { text: "Document incident later", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "mobility.syncopeRisk"
},
{
  q: "The nurse technician notes a patient’s oxygen saturation dropped from 96% to 88%. What is the correct action?",
  options: [
    { text: "Report immediately to the nurse", tag: "SCFHS" },
    { text: "Increase oxygen flow rate", tag: "STR" },
    { text: "Recheck in 30 minutes", tag: "SAFE_DELAY" },
    { text: "Document only", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "respiration.hypoxia"
},
{
  q: "A patient refuses a bath. What is the appropriate nurse technician response?",
  options: [
    { text: "Respect refusal and inform nurse", tag: "SCFHS" },
    { text: "Insist on completing care", tag: "STR" },
    { text: "Ignore patient and leave", tag: "SAFE_DELAY" },
    { text: "Document refusal only", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "ethics.patientRights"
},
{
  q: "A patient has not voided for 8 hours. What should the nurse technician do?",
  options: [
    { text: "Report the finding to the nurse", tag: "SCFHS" },
    { text: "Encourage fluids without reporting", tag: "NCLEX" },
    { text: "Insert catheter", tag: "STR" },
    { text: "Wait until next shift", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "urinary.retention"
},
{
  q: "While making rounds, the nurse technician smells smoke in a patient room. What is the FIRST action?",
  options: [
    { text: "Ensure patient safety and call for help", tag: "SCFHS" },
    { text: "Investigate source alone", tag: "NCLEX" },
    { text: "Ignore if no flames seen", tag: "SAFE_DELAY" },
    { text: "Open windows immediately", tag: "STR" }
  ],
  correctTag: "SCFHS",
  mechanism: "emergency.fireSafety"
},
{
  q: "A patient in the ICU suddenly becomes unresponsive. What is the FIRST action of the nurse technician?",
  options: [
    { text: "Call for help and activate emergency response", tag: "SCFHS" },
    { text: "Check vital signs", tag: "NCLEX" },
    { text: "Begin CPR independently", tag: "STR" },
    { text: "Document the event", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.cardiacArrest"
},
{
  q: "A ventilated patient’s alarm is sounding and the patient appears distressed. What should the nurse technician do FIRST?",
  options: [
    { text: "Check patient and tubing, then call nurse", tag: "SCFHS" },
    { text: "Silence the alarm", tag: "STR" },
    { text: "Increase oxygen flow", tag: "NCLEX" },
    { text: "Wait for respiratory therapist", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.ventilatorAlarm"
},
{
  q: "A patient receiving blood transfusion develops chills and fever. What is the PRIORITY action?",
  options: [
    { text: "Stop transfusion and notify nurse immediately", tag: "SCFHS" },
    { text: "Slow the transfusion rate", tag: "NCLEX" },
    { text: "Provide warm blankets", tag: "STR" },
    { text: "Document reaction", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.transfusionReaction"
},
{
  q: "A post-operative patient suddenly complains of chest pain and shortness of breath. What should the nurse technician do FIRST?",
  options: [
    { text: "Call for immediate medical assistance", tag: "SCFHS" },
    { text: "Position patient upright", tag: "NCLEX" },
    { text: "Apply oxygen without order", tag: "STR" },
    { text: "Reassure the patient", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "er.pulmonaryEmbolism"
},
{
  q: "A patient in restraints is found cyanotic and not breathing. What is the FIRST action?",
  options: [
    { text: "Remove restraints and call for help", tag: "SCFHS" },
    { text: "Check pulse", tag: "NCLEX" },
    { text: "Document incident", tag: "SAFE_DELAY" },
    { text: "Wait for the nurse", tag: "STR" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.restraintEmergency"
},
{
  q: "During a mass casualty incident, which patient should be attended to FIRST?",
  options: [
    { text: "Patient with airway obstruction", tag: "SCFHS" },
    { text: "Patient with open fracture", tag: "NCLEX" },
    { text: "Patient with minor burns", tag: "STR" },
    { text: "Patient walking and crying", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "disaster.triage"
},
{
  q: "A patient suddenly vomits and becomes unconscious. What is the FIRST action?",
  options: [
    { text: "Turn patient to side to protect airway", tag: "SCFHS" },
    { text: "Call the nurse", tag: "NCLEX" },
    { text: "Insert oral airway", tag: "STR" },
    { text: "Document event", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "er.airwayProtection"
},
{
  q: "An ICU patient’s blood pressure drops rapidly. What should the nurse technician do?",
  options: [
    { text: "Notify nurse immediately", tag: "SCFHS" },
    { text: "Recheck BP in 15 minutes", tag: "SAFE_DELAY" },
    { text: "Increase IV fluids", tag: "STR" },
    { text: "Document the finding", tag: "NCLEX" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.hypotension"
},
{
  q: "A patient receiving tube feeding develops sudden coughing and respiratory distress. What is the FIRST action?",
  options: [
    { text: "Stop feeding and elevate head of bed", tag: "SCFHS" },
    { text: "Suction immediately", tag: "NCLEX" },
    { text: "Notify nurse before action", tag: "SAFE_DELAY" },
    { text: "Flush feeding tube", tag: "STR" }
  ],
  correctTag: "SCFHS",
  mechanism: "icu.aspiration"
},
{
  q: "A patient collapses in the hallway. What is the nurse technician’s FIRST response?",
  options: [
    { text: "Call emergency response and stay with patient", tag: "SCFHS" },
    { text: "Check blood pressure", tag: "NCLEX" },
    { text: "Move patient to bed", tag: "STR" },
    { text: "Document incident", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "er.collapse"
},
{
  q: "A patient suddenly starts seizing. What should the nurse technician do FIRST?",
  options: [
    { text: "Protect patient from injury and call for help", tag: "SCFHS" },
    { text: "Insert object into mouth", tag: "STR" },
    { text: "Restrain the patient", tag: "NCLEX" },
    { text: "Document seizure activity", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "neuro.seizure"
},
{
  q: "A fire alarm activates in the ICU. What is the FIRST priority?",
  options: [
    { text: "Ensure patient safety and follow fire protocol", tag: "SCFHS" },
    { text: "Finish current task", tag: "SAFE_DELAY" },
    { text: "Investigate source alone", tag: "NCLEX" },
    { text: "Open all windows", tag: "STR" }
  ],
  correctTag: "SCFHS",
  mechanism: "disaster.fire"
},
{
  q: "A patient becomes suddenly aggressive and threatens staff. What is the nurse technician’s priority?",
  options: [
    { text: "Ensure safety and call for assistance", tag: "SCFHS" },
    { text: "Attempt verbal counseling alone", tag: "NCLEX" },
    { text: "Apply restraints immediately", tag: "STR" },
    { text: "Document behavior", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "psychiatric.violence"
},
{
  q: "A patient is found on the floor after a loud noise. What is the FIRST action?",
  options: [
    { text: "Assess patient and call for help", tag: "SCFHS" },
    { text: "Help patient back to bed", tag: "STR" },
    { text: "Ask what happened", tag: "NCLEX" },
    { text: "Complete incident report", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "safety.fall"
},
{
  q: "A patient suddenly stops breathing while on the ward. What should the nurse technician do FIRST?",
  options: [
    { text: "Activate emergency response system", tag: "SCFHS" },
    { text: "Check oxygen equipment", tag: "NCLEX" },
    { text: "Begin ventilation without help", tag: "STR" },
    { text: "Document findings", tag: "SAFE_DELAY" }
  ],
  correctTag: "SCFHS",
  mechanism: "er.respiratoryArrest"
},

};

// ================================
// ENGINE STATE
// ================================
let index = 0;

// ================================
// START QUIZ
// ================================
document.getElementById("startBtn").addEventListener("click", function(){
  document.getElementById("startDiv").classList.add("hidden");
  document.getElementById("quiz").classList.remove("hidden");
  document.getElementById("jumpDiv").classList.remove("hidden");
  renderQuestion();
});

// ================================
// RENDER QUESTION
// ================================
function renderQuestion() {
  const q = questions[index];
  const quizDiv = document.getElementById("quiz");
  document.getElementById("review").classList.add("hidden");
  document.getElementById("nextBtn").classList.add("hidden");

  quizDiv.innerHTML = `<p><b>Question ${index+1}:</b><br>${q.q}</p>`;

  q.options.forEach((o,i)=>{
    const div = document.createElement("div");
    div.classList.add("option");
    div.innerHTML = `${String.fromCharCode(65+i)}. ${o.text} <span class="tag ${o.tag}">${o.tag}</span>`;
    div.onclick = () => selectAnswer(o.tag, div);
    quizDiv.appendChild(div);
  });

  updateProgress();
}

// ================================
// HANDLE SELECTION
// ================================
function selectAnswer(tag, div) {
  const q = questions[index];
  const review = document.getElementById("review");
  review.classList.remove("hidden");

  const [group,key] = q.mechanism.split(".");
  const mech = rationaleLibrary[group][key];

  document.querySelectorAll(".option").forEach(d=>d.style.pointerEvents="none");

  document.querySelectorAll(".option").forEach(d=>{
    if(d.innerHTML.includes(q.correctTag)) d.classList.add("correct");
    else d.classList.add("incorrect");
  });

  let html = `<div class="header">✅ Correct Rationale</div>${mech.correct}`;
  html += `<div class="header">❌ Option Analysis</div>`;
  q.options.forEach(o=>{
    if(o.tag===q.correctTag) html += `<div><b>${o.text}</b> (${o.tag}) — Correct</div>`;
    else html += `<div><b>${o.text}</b> (${o.tag}) — ${mech.distractors[o.tag]}</div>`;
  });

  html += `<div class="expand">
    <div class="header">Core Principle (Exam Language)</div><pre>${mech.exam}</pre>
    <div class="header">Pathophysiologic Chain</div><pre>${mech.patho}</pre>
    <div class="header">Intuitive Clinical Mapping</div><pre>${mech.intuitive}</pre>
  </div>`;

  review.innerHTML = html;
  document.getElementById("nextBtn").classList.remove("hidden");
}

// ================================
// NEXT QUESTION
// ================================
function nextQuestion() {
  index++;
  if(index >= questions.length){
    document.getElementById("quiz").innerHTML="<h3>End of Review</h3>";
    document.getElementById("review").classList.add("hidden");
    document.getElementById("nextBtn").classList.add("hidden");
    return;
  }
  renderQuestion();
}

// ================================
// JUMP TO SPECIFIC QUESTION
// ================================
function jumpToQuestion() {
  const input = parseInt(document.getElementById("jumpInput").value);
  if(isNaN(input) || input<1 || input>questions.length){
    alert("Invalid question number");
    return;
  }
  index = input-1;
  renderQuestion();
}

// ================================
// PROGRESS BAR
// ================================
function updateProgress(){
  const bar = document.getElementById("progressBar");
  const percent = Math.round(((index)/questions.length)*100);
  bar.style.width = percent+"%";
  bar.innerText = percent+"%";
}
</script>

</body>
</html>
